sudo: required
services:
- docker
branches:
  only:
  - master
env:
  global:
  - REGISTRY: registry.blackwoodseven.com
  - IMAGENAME: "$REGISTRY/$TRAVIS_REPO_SLUG"
  - TAG_VERSION: "$TRAVIS_BRANCH.$TRAVIS_BUILD_NUMBER"
  - TAG_LATEST: latest
  - secure: cKA4RMosmO73fuCsW7Lm6Qf9IPsdO8moqWRBBtScP2bavZ9SSbnaTusBskKiesxrdsy3S1KXNsKC03SOOuyW+yIabW2rxOsdGzxAyGtrZoYZRffXEhOyUkliDYKaeBhmjA4jo6UQire4SH9cosY/xjaFHNCJPA2KDCmhXW7DTIqMNDnOphFJULNNZRu7OaYNR1hDxFbj/hPtEykp95nX9osIJZ5BKQBFqPEjFOzeLdEiKfKdgoh08KekFY7+gaXwO9VRUj5eoKKRBpXiwJI0/Xirx9GjObIHqI0eKXdyPMgCMzokvMXiq+trESjfPxPF8bmqyG3Dq7Cj5yuvHqmBv8wZImTEPvjm2PJyuCaNCVYEPusWNyZD2fiFDjSa3viEer9K6jpKH0yClF3mOoJldezYAxIHgP1LYcoLf7dgzwgakAYdxLS1/Jgd0eAMetWkEqFOmnVnrnC9FnXaEwAgTBBt6YrimIfVJiMKvewkUD9NJGOZb8bXBm9GoQsssPgzuyIoV/xoj9hZVPyFMRi/jZkixMnaeEGI2ZJfsrWq8MBZA1sHqusphcZFb0tBOIOiVJEvdcfc7Zuccg7GG4VAZZ+qSjfRoiq4/iq9+nLnzo1uPfMBHRolX6UqKSVYKrVGJE452ykhtEfZXjZiZdIr+S0j7Kq7fA7jpmIxxbYRICA=
before_script:
- docker login -u businesslogic -p "$REGISTRY_PASSWORD" $REGISTRY
- echo "LABEL GIT_COMMIT=$TRAVIS_COMMIT" >> Dockerfile
- echo "LABEL TAG_VERSION=$TAG_VERSION" >> Dockerfile
script:
- 'docker --version && docker-compose --version && make test && make compile && docker
  build $CACHE -t $IMAGENAME:$TAG_VERSION -t $IMAGENAME:$TAG_LATEST . && docker push
  $IMAGENAME:$TAG_VERSION && docker push $IMAGENAME:$TAG_LATEST '
after_success:
- 'git config --global user.email "tech@blackwoodseven.com" && git config --global
  user.name "Travis CI" && git tag -f $TAG_VERSION $TRAVIS_COMMIT && git push --tags
  && curl -G --data-urlencode "cause=$IMAGENAME:$TAG_VERSION build successfully on
  Travis" jenkins-buildtrigger.stage.blackwoodseven.com/?job=businesslogic-development\&token=bIsASXhoBfKaFHUrBBE7 '
after_failure:
- echo failed
notifications:
  slack:
    secure: rchA54cZ1kRoIJS0rn/dCfVbP6MAjVwjuwcSrpQSL8YvvTD9o0oJRBcBESxHV0Y1BcihvR/jKduPFje1HhFLtTVTnFexkbzMQdplJxISuJMFMtKHd8xnTJeviS55m9anKqqiTK7zVo1WeT39A8pZzMBwwYdvKUamhKP+S5OdLPYe9x/4PrDWrgllJatw/FVn9YGaX0J5wUTXJX3xwVNPldIjnP7jLHfEQJRL3xSXpCcKess1a7SjQRG49l+yfmUdmVicWyqtjyade2eV/9GDDTHTGQJr2ZRDpdH1LIK1n8lttuFlJHK5atUfoJb4yYIG1JGhrbwErgg4RKH5dYs6AG91IQr12L8Hs0abN1mg9H0p5Apb++tCnu4mzRfTOhJAbS8hNoQW2NzxmyeqtFpJuz3jD45DpnkXJOn84ZN0rOXyOLE24uoYzdbWrL67YrkeyyPocE6Mq2ATfn+n7bfneLLDE7Tb8PvQt3CRw31umUE/pH9VMczs3I32L7f3HNHRI+ZyabtTk3PRA55RUPF7DFXSWBK1faL5NfWt8r1Xgvho2UPreCgaEJ0Rxayy5i7m7IIl3rNjvhiVekoEnmY6FXJ+ZwvVqe4jIFwR+FSLrepGww+kMBm7ILuiSDka2spQFWE8dj7Y4Bi/z+ZmQU0NHZY2dsyk179GhduQ/4zhGz4=
